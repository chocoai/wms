<!--流程表单弹窗-->

<div class="modal fade" id="my-popup-addProcessform" z-index="10">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title ">流程表单</div>
            </div>
            <div class="modal-body">
                <form name='addProcessformForm'>
                    <table class="table table-striped table-hover">
                        <tr>
                            <td width="120"><span style="color: red">*</span>表单引用：</td>
                            <td>
                                <input type="text" ng-model="currNode.filter" placeholder="过滤表单" alt="过滤表单">

                                <select name="formId" ng-model="addProcessform.formId"
                                        ng-options="activityform.id as activityform.formTitle for activityform in currentRow.activityforms  | filter:currNode.filter"
                                        required></select>&nbsp;&nbsp;&nbsp;&nbsp;

                                <span ng-show="addProcessformForm.formId.$error.required"
                                      class="text-danger">请选择表单引用</span>
                            </td>
                        </tr>
<!--                         <tr> -->
<!--                             <td><span style="color: red">*</span>许可类型：</td> -->
<!--                             <td> -->
<!--                                 <select ng-model="addProcessform.permisisionType" name="permisisionType" required> -->
<!--                                     <option value="0">乐观许可</option> -->
<!--                                     <option value="1">悲观许可</option> -->
<!--                                 </select> -->
<!--                                 <span ng-show="addProcessformForm.permisisionType.$error.required  && !addProcessformForm.permisisionType.$pristine" -->
<!--                                       class="text-danger">请选择许可类型</span> -->
<!--                             </td> -->
<!--                         </tr> -->
                        <tr>
	                        <td>无数据显示方式：</td>
	                        <td>
	                            <select ng-model="addProcessform.showType" name="showType" required>
	                                <option value="0">隐藏</option>
	                                <option value="1">新建</option>
	                            </select>
	                            <span ng-show="addProcessformForm.showType.$error.required"
	                                  class="text-danger">请选择无数据显示方式</span>
	                        </td>
	                    </tr>
<!--                         <tr> -->
<!--                             <td>排除字段：</td> -->
<!--                             <td> -->
<!--                                 <input type="text" maxlength="1000" ng-model="addProcessform.excludeFields"> -->
<!--                             </td> -->
<!--                         </tr> -->
<!--                         <tr> -->
<!--                             <td>必填字段：</td> -->
<!--                             <td><textarea rows="3" cols="35" maxlength="1000" -->
<!--                                           ng-model="addProcessform.requireField"></textarea></td> -->
<!--                         </tr> -->
                        <tr>
                            <td>排序号：</td>
                            <td>
                                <input type="number" maxlength="5" ng-model="addProcessform.sortNumber">
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" ng-click="addProcessformInfo()"
                        ng-disabled="addProcessformForm.$invalid">保存
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="my-popup-editProcessform">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title ">保存流程表单</div>
            </div>
            <div class="modal-body">
                <form name='editProcessformForm'>
                    <table class="table  table-striped table-hover">
                        <tr>
                            <td width="120"><span style="color: red">*</span>表单引用：</td>
                            <td>
                                <input type="text" ng-model="currNode.filter" placeholder="过滤表单" alt="过滤表单">

                                <select name="formId"
                                        ng-model="editProcessform.formId"
                                        ng-options="activityform.id as activityform.formTitle for activityform in currentRow.activityforms | filter:currNode.filter"
                                        required>
                                </select>&nbsp;&nbsp;&nbsp;&nbsp;

                                <span ng-show="editProcessform.formId.$error.required  && !editProcessform.formId.$pristine"
                                      class="am-text-danger">请选择表单引用</span>
                            </td>
                        </tr>
                        <tr>
	                        <td>无数据显示方式：</td>
	                        <td>
	                            <select ng-model="editProcessform.showType" name="showType" required>
	                                <option value="0">隐藏</option>
	                                <option value="1">新建</option>
	                            </select>
	                            <span ng-show="editProcessform.showType.$error.required"
	                                  class="text-danger">请选择无数据显示方式</span>
	                        </td>
	                    </tr>
<!--                         <tr> -->
<!--                             <td><span style="color: red">*</span>许可类型：</td> -->
<!--                             <td> -->
<!--                                 <select ng-model="editProcessform.permisisionType" name="permisisionType" required> -->
<!--                                     <option value="0">乐观许可</option> -->
<!--                                     <option value="1">悲观许可</option> -->
<!--                                 </select> -->
<!--                                 <span ng-show="editProcessformForm.permisisionType.$error.required  && !editProcessformForm.permisisionType.$pristine" -->
<!--                                       class="am-text-danger">请选择许可类型</span> -->
<!--                             </td> -->
<!--                         </tr> -->
<!--                         <tr> -->
<!--                             <td>排除字段：</td> -->
<!--                             <td> -->
<!--                                 <input type="text" maxlength="1000" ng-model="editProcessform.excludeFields"> -->
<!--                             </td> -->
<!--                         </tr> -->
<!--                         <tr> -->
<!--                             <td>必填字段：</td> -->
<!--                             <td><textarea rows="3" cols="35" maxlength="1000" -->
<!--                                           ng-model="editProcessform.requireField"></textarea></td> -->
<!--                         </tr> -->
                        <tr>
                            <td>排序号：</td>
                            <td>
                                <input type="number" maxlength="5" ng-model="editProcessform.sortNumber">
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" ng-click="editProcessformInfo()()"
                        ng-disabled="editProcessform.$invalid">保存
                </button>
            </div>
        </div>
    </div>
</div>

<!--流程事件-->
<!----新增活动事件弹窗--->
<div class="modal fade" tabindex="-1" id="my-popup-addProcessdeEvent" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">新增活动事件</h4>
            </div>
            <div class="modal-body">
                <form name='addEvent'>
                    <table class="table  table-striped table-hover" >
                        <tr>
                            <td>事件类别：</td>
                            <td>
                                <select ng-model="addEventdefinition.category" name="category" required>
                                    <option value="0">开始事件</option>
                                    <option value="1">结束事件</option>
                                </select>
                                <span ng-show="addEvent.category.$error.required" class="text-danger">请选择事件类别</span>
                            </td>
                        </tr>
                        <tr style="display: none">
                        	<td>
                        		<!-- 流程事件添加设置默认为流程事件类型 -->
                            	<input ng-model="addEventdefinition.type" ng-init="addEventdefinition.type='0'" type="text" name= "type">
                        	</td>
                        </tr>
<!--                         <tr> -->
<!-- 	                        <td>事件类型：</td> -->
<!-- 	                        <td> -->
<!-- 	                            <select ng-model="addEventdefinition.type" name="type" required> -->
<!-- 	                                 <option value="0">流程事件</option> -->
<!-- 	                                <option value="1">活动事件</option> -->
<!-- 	                            </select> -->
<!-- 	                            <span ng-show="addEvent.type.$error.required" class="text-danger">请选择事件类型</span> -->
<!-- 	                        </td> -->
<!-- 	                    </tr> -->
<!-- 	                    <tr> -->
<!-- 	                        <td>事件类名称：</td> -->
<!-- 	                        <td> -->
<!-- 	                            <input type="text" ng-model="addEventdefinition.clazz" name="clazz" required> -->
<!-- 	                            <span ng-show="addEvent.clazz.$error.required" class="text-danger">请输入事件类名称</span> -->
<!-- 	                        </td> -->
<!-- 	                    </tr> -->
	                    <tr class="am-danger">
			                <td>接口类型：</td>
			                <td>
			                	<select ng-model="addEventdefinition.interfaceType" name="interfaceType" required>
                                    <option value="1">Java类型</option>
                                    <option value="2">JS类型</option>
                                </select>
			                	<span ng-show="addEvent.interfaceType.$error.required" class="text-danger">请选择接口类别</span>
			                </td>
			            </tr>
	                    
	                    <tr>
	                        <td>事件执行表达式：</td>
	                        <td ng-show="addEventdefinition.interfaceType != '2'">
	                            <input type="text" ng-model="addEventdefinition.expr" name="expr" >
	                        </td>
	                        <td ng-show="addEventdefinition.interfaceType == '2'">
	                        	<textarea  rows="3" cols="35" ng-model="addEventdefinition.jsExpr"></textarea>
	                        </td>
	                    </tr>
	                        
                        <tr>
                            <td>事件描述：</td>
                            <td>
                                <textarea  rows="3" cols="35" ng-model="addEventdefinition.desc"></textarea></td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button class="btn btn-primary" ng-click="addEventInfo()" ng-disabled="addEvent.$invalid">提交</button>
            </div>
        </div>
    </div>
</div>
<!----修改弹窗--->
<div class="modal fade" tabindex="-1" id="my-popup-editProcessdeEvent" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">修改流程事件</h4>
            </div>
            <div class="modal-body">
                <form name='editEvent'>
                    <table class="table  table-striped table-hover" >
                        <tr>
                            <td>事件类别：</td>
                            <td>
                                <select ng-model="editEventdefinition.category" name="category" required>
                                    <option value="0">开始事件</option>
                                    <option value="1">结束事件</option>
                                </select>
                                <span ng-show="editEvent.category.$error.required" class="text-danger">请选择事件类别</span>
                            </td>
                        </tr>
                        <tr style="display: none">
                        	<td>
                        		<!-- 流程事件修改设置默认为流程事件类型 -->
                            	<input ng-model="editEventdefinition.type" ng-init="editEventdefinition.type='0'" type="text" name= "type">
                        	</td>
                        </tr>
	                    <tr class="am-danger">
			                <td>接口类型：</td>
			                <td>
			                	<select ng-model="editEventdefinition.interfaceType" name="interfaceType" required>
	                                <option value="1">Java类型</option>
	                                <option value="2">JS类型</option>
	                            </select>
				                <span ng-show="editEvent.interfaceType.$error.required" class="text-danger">请选择接口类别</span>
			                </td>
			            </tr>
	                    <tr>
	                        <td>事件定义：</td>
	                        <td ng-show="editEventdefinition.interfaceType != '2'">
	                            <input type="text" ng-model="editEventdefinition.clazz" name="clazz" >
	                        </td>
	                        <td ng-show="editEventdefinition.interfaceType == '2'">
	                        	<textarea  rows="3" cols="35" ng-model="editEventdefinition.jsExpr"></textarea>
	                        </td>
	                    </tr>
                        <tr>
                            <td>事件描述：</td>
                            <td>
                                <textarea  rows="3" cols="35" ng-model="editEventdefinition.desc"></textarea>
                                <input type="hidden" id="edindexHidden"  >
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button class="btn btn-primary" ng-click="editEventInfo()" ng-disabled="editEvent.$invalid">提交</button>
            </div>
        </div>
    </div>
   </div>
