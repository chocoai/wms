<?xml version="1.0" encoding="utf-8"?>
<BillFormMeta Key="kehujibenxinxi" Version="1.0.0" BillType="Dictionary" Caption="客户基本信息">
    <BillBody>
        <BillBodyMeta UserAgent="web">
            <BillUIPanel Layout="flex" FlexDirection="column" Width="100%" Key="mainContainer" Caption="客户基本信息" S="">
                <BillUIPanel Layout="flex" Key="dictionary_tools" Caption="工具栏">
                    <BillUIWidget Key="submit" Caption="提交"
                                  EnabledWhen="True"
                                  Icon="glyphicon glyphicon-floppy-saved" WidgetType="BillUIButton">
                        <Triggers>
                            <Trigger Type="javascript/angular" Runat="client">
                                <![CDATA[
                                      var cos=getDataset("kehuweituoren").cos;
                                    var bool=true;
                                    for(var i=0;i<cos.length;i++){
                                        if(cos[i].sfzlxr==1){
                                            bool=false;
                                        }
                                    }
                                    if(bool){
                                         alert("请填写主联系人");
                                          return;
                                      }
                                      if(getHeadValue('jingyingfangshi')==1){
                                            if(getHeadValue("yxqzfs")==0){
                                                if(getHeadValue('zcyxq')==''){
                                                    alert("请填写（营业执照）有效期至信息");
                                                    return;
                                                }
                                             }
                                            if(getHeadValue('sfszhy')==0){
                                             if(getHeadValue('zzjgdmz')==''){
                                                alert("请填写组织机构代码证信息");
                                                return;
                                            }
                                             if(getHeadValue('fazhengriqi')==''){
                                                alert("请填写发证日期信息");
                                                return;
                                            }
                                             if(getHeadValue('fzyxq')==''){
                                                alert("请填写有效期至信息");
                                                return;
                                            }
                                             if(getHeadValue('shuihao')==''){
                                                alert("请填写税务登记证号信息");
                                                return;
                                            }
                                             if(getHeadValue('swfzjg')==''){
                                                alert("请填写发证机关（组织机构代码证）信息");
                                                return;
                                            }
                                        }
                                    }
                                      var name=getHeadValue("kehuleixing");
                                      var selName=getFormat(name,'kehuleixing');
                                       if(name==0){
                                        alert("请填写客户类型信息");
                                        return;
                                     }
                                    var mingcheng=getHeadValue("kehumingcheng");
                                    if(mingcheng==''){
                                        alert("请填写客户类型名称信息");
                                        return;
                                     }
                                     var cos2=getDataset("zhiliangzhengzhaoxinxi").cos;
                                    if(name==2 || name==4){
                                         if(cos2.length<2){
                                            alert(selName+"证书必包括：'药品经营许可证'、'GSP'");
                                            return;
                                         }
                                        var bool=true;
                                        var gmp=true;
                                        for(var i=0;i<cos2.length;i++){
                                            if(cos2[i].zhengshuleixing==7){
                                                bool=false;
                                            }else if(cos2[i].zhengshuleixing==8){
                                                gmp=false;
                                            }
                                        }
                                        if(bool || gmp){
                                            alert(selName+"证书必包括：'药品经营许可证'、'GSP'");
                                            return;
                                        }
                                    }else{
                                        var bool=true;
                                        for(var i=0;i<cos2.length;i++){
                                            if(cos2[i].zhengshuleixing==16){
                                                bool=false;
                                            }
                                        }
                                        if(bool){
                                            alert(selName+"证书必包括：'医疗机构执业许可证'");
                                            return;
                                        }
                                    }
                                     if(getHeadValue("sheng")==0){
                                        alert("请填写省份信息");
                                        return;
                                     }else if(getHeadValue('shi')==0){
                                        alert("请填写市信息");
                                        return;
                                     }else if(getHeadValue('qu')==0){
                                        alert("请填写区信息");
                                        return;
                                     }
                                    if(getStatus()==30){
                                        	alert("单据已经提交修改，不能编辑");
                                        }else{
                                           var mingcheng=getHeadValue("kehumingcheng");
                                           var zhujimaFunc=@submit.zhujimaFunc(mingcheng);
                                           zhujimaFunc.then(function(data) {
                                              var zhu=eval("("+data+")");
                                             if(zhu.result[0].zhujima){
                                                var zhujima=zhu.result[0].zhujima;
                                                setHeadValue("zhujima",zhujima);
                                             }
                                            @$this.save('type',{
                                                     before:{
                                                        setStatus:[30]
                                                     }
                                                     });
                                        } ,function(e){
                                        });
                                     }

	                                  ]]>
                            </Trigger>
                        </Triggers>
                    </BillUIWidget>
                    <BillUIWidget Key="goback" Caption="返回"
                                  DataTableKey="gonghuoshangxiaoqizhengzhao" DataTableColumn="delete" EnabledWhen="True"
                                  Icon="glyphicon glyphicon-remove-circle" WidgetType="BillUIButton"
                                  S="btn btn-danger ">
                        <Triggers>
                            <Trigger Type="javascript/angular" Runat="client">
                                <![CDATA[
                                        	@$this.$reBack();
	                            		]]>
                            </Trigger>
                        </Triggers>
                    </BillUIWidget>
                    <BillUIWidget Key="fujian" DataTableColumn="fujian" WidgetType="BillUIAttachment"
                                  EnabledWhen="True" DataTableKey="kehujibenxinxi"/>
                    <BillUIWidget Key="process" Caption="审核流程"
                                  EnabledWhen="True" S="btn btn-primary setHide"
                                  Icon="glyphicon glyphicon-exclamation-sign" WidgetType="BillUIButton">
                        <Init Type="javascript/angular" Runat="client">
                            <![CDATA[
                                            var status=getStatus();
                                            if(status>=30){
                                                this.setShow();
                                            }
										]]>
                        </Init>
                        <Triggers>
                            <Trigger Type="javascript/angular" Runat="client">
                                <![CDATA[
                                                this.setEnvModel({piID:getHeadValue("piID")});
												@$this.process();
	                            		]]>
                            </Trigger>
                        </Triggers>
                    </BillUIWidget>
                    <BillUIWidget Key="downloadExcel" Caption="导出"
                                  EnabledWhen="True" FileName="客户资料导出"
                                  Icon="glyphicon glyphicon-save-file" WidgetType="BillUIButton">
                        <Init Type="javascript/angular" Runat="client">
                            <![CDATA[
                                            this.setEnable();
										]]>
                        </Init>
                        <Triggers>
                            <Trigger Type="javascript/angular" Runat="client">
                                <![CDATA[
                                 @$this.downloadExcel();
	                            ]]>
                            </Trigger>
                        </Triggers>
                        <ExportSheets>
                            <ExportSheet SheetName="客户基本信息" TitleName="" DataTableKey="kehujibenxinxi">
                                <ExportColumns>
                                    <ExportColumn Caption="客户编号" DataTableColumn="kehubianhao" />
                                    <ExportColumn Caption="客户名称" DataTableColumn="kehumingcheng"/>
                                    <ExportColumn Caption="法定代表人" DataTableColumn="farendaibiao"/>
                                    <ExportColumn Caption="客户类别" DataTableColumn="kehuleixing" Type="Dic">
                                        <![CDATA[
                                          {'url':'select','type':'kehuleixing'}
                                        ]]>
                                    </ExportColumn>
                                    <ExportColumn Caption="注册地址" DataTableColumn="dizhi"/>
                                    <ExportColumn Caption="电商编号" DataTableColumn="onlineid"/>

                                    <ExportColumn Caption="经营范围" DataTableColumn="fanweiName" />
                                    <ExportColumn Caption="省" DataTableColumn="sheng"/>
                                    <ExportColumn Caption="市" DataTableColumn="shi"/>
                                    <ExportColumn Caption="区" DataTableColumn="qu"/>
                                    <ExportColumn Caption="经营方式" DataTableColumn="jingyingfangshi" Type="Dic">
                                        <![CDATA[
                                          {'url':'select','type':'jinyingfangshi'}
                                        ]]>
                                    </ExportColumn>
                                    <ExportColumn Caption="营业执照" DataTableColumn="yingyezhizhao"/>

                                    <ExportColumn Caption="发证机关（营业执照）" DataTableColumn="fazhengjiguan"/>
                                    <ExportColumn Caption="注册日期" DataTableColumn="zhuceriqi"/>
                                    <ExportColumn Caption="有效期至方式" DataTableColumn="yxqzfs" Type="Dic">
                                        <![CDATA[
                                          {'url':'select','type':'yxqzfs'}
                                        ]]>
                                    </ExportColumn>
                                    <ExportColumn Caption="有效期至（营业执照）" DataTableColumn="zcyxq" />
                                    <ExportColumn Caption="是否三证合一" DataTableColumn="sfszhy" Type="Dic">
                                        <![CDATA[
                                          {'url':'select','type':'bool'}
                                        ]]>
                                    </ExportColumn>

                                    <ExportColumn Caption="开户银行" DataTableColumn="kaihuyinhang" />
                                    <ExportColumn Caption="银行账号" DataTableColumn="yinhangzhanghao"/>
                                    <ExportColumn Caption="开户户名" DataTableColumn="kaihuhuming" />
                                    <ExportColumn Caption="组织机构代码证" DataTableColumn="zzjgdmz"/>
                                    <ExportColumn Caption="发证日期" DataTableColumn="fazhengriqi"/>

                                    <ExportColumn Caption="有效期至（组织机构代码证）" DataTableColumn="fzyxq"/>
                                    <ExportColumn Caption="税务登记号" DataTableColumn="shuihao"/>
                                    <ExportColumn Caption="发证机关（组织机构代码证）" DataTableColumn="swfzjg"/>
                                    <ExportColumn Caption="企业负责人" DataTableColumn="qyfzr"/>
                                    <ExportColumn Caption="质量负责人" DataTableColumn="zlfzr" />

                                    <ExportColumn Caption="仓库地址" DataTableColumn="cangkudizhi"/>
                                </ExportColumns>
                            </ExportSheet>
                            <ExportSheet SheetName="证照信息" TitleName="" DataTableKey="zhiliangzhengzhaoxinxi">
                                <ExportColumns>
                                    <ExportColumn Caption="证书类型" DataTableColumn="zhengshuleixing" Type="Dic">
                                        <![CDATA[
                                          {'url':'select','type':'zhengjianmingcheng'}
                                        ]]>
                                    </ExportColumn>
                                    <ExportColumn Caption="证书编号" DataTableColumn="zhengshubianhao"/>

                                    <ExportColumn Caption="发证机关" DataTableColumn="fazhengjiguan"/>
                                    <ExportColumn Caption="发证日期" DataTableColumn="fazhengriqi"/>
                                    <ExportColumn Caption="有效期至" DataTableColumn="youxiaoqizhi"/>

                                </ExportColumns>
                            </ExportSheet>
                            <ExportSheet SheetName="委托人信息" TitleName="" DataTableKey="kehuweituoren">
                                <ExportColumns>
                                    <ExportColumn Caption="委托人类型" DataTableColumn="wtrlx" Type="Dic">
                                        <![CDATA[
                                          {'url':'select','type':'wtrlx'}
                                        ]]>
                                    </ExportColumn>
                                    <ExportColumn Caption="姓名" DataTableColumn="xingming"/>
                                    <ExportColumn Caption="性别" DataTableColumn="xingbie" Type="Dic">
                                        <![CDATA[
                                          {'url':'select','type':'xingbie'}
                                        ]]>
                                    </ExportColumn>
                                    <ExportColumn Caption="电话" DataTableColumn="dianhua"/>
                                    <ExportColumn Caption="证件号码" DataTableColumn="zhengjianhaoma" />

                                    <ExportColumn Caption="地址" DataTableColumn="dizhi"/>
                                    <ExportColumn Caption="委托人有效期" DataTableColumn="wtryxq"/>
                                    <ExportColumn Caption="委托书编号" DataTableColumn="wtsbh"/>
                                    <ExportColumn Caption="是否主联系人" DataTableColumn="sfzlxr" Type="Dic">
                                        <![CDATA[
                                          {'url':'select','type':'bool'}
                                        ]]>
                                    </ExportColumn>
                                </ExportColumns>
                            </ExportSheet>
                        </ExportSheets>
                    </BillUIWidget>
                </BillUIPanel>
                <BillUIPanel Key="dictionary_tree" Layout="flex" Caption="字段明细"
                             S="">
                    <BillUIGridPanel Device="sm" Key="h2">
                        <BillUIRowPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="kehubianhao" Caption="客户编号"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="kehubianhao"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="5">
                                <BillUIWidget Key="kehumingcheng" Caption="客户名称" Required="Required"
                                              DataTableKey="kehujibenxinxi"
                                              DataTableColumn="kehumingcheng" EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="4">
                                <BillUIWidget Key="farendaibiao" Caption="法定代表人" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="farendaibiao"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                        </BillUIRowPanel>
                        <BillUIRowPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="kehuleixing" Caption="客户类别" DataTableKey="kehujibenxinxi"
                                              DataTableColumn="kehuleixing" EnabledWhen="True" Required="Required"
                                              WidgetType="BillUISelect"
                                              Src="bill/selectSrc?type=kehuleixing">
                                    <Init Type="javascript/angular" Runat="client">
                                        <![CDATA[
                                                this.loadDataSource();
                                                var v = getHeadValue("kehuleixing");
                                                var j = getHeadValue("jingyingfangshi");
                                                @zhengshuleixing.loadDataSource();
                                               if(v==2){/* 2	终端*/
                                                    @zhengshuleixing.removeData('1,2,9,10,11,12,13,14,15,16');
                                               }else if(v==3&&j==1){ /*3	诊所 盈利*/
                                                     @zhengshuleixing.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }else if(v==3&&j==2){/*3	诊所 非盈利*/
                                                    @zhengshuleixing.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }else if(v==1&&j==1){/*1	医院 非盈利*/
                                                    @zhengshuleixing.removeData('1,2,7,8,9,10,11,12,13,14,15');
                                               }else if(v==1&&j==2){/*1	医院 非盈利*/
                                                   @zhengshuleixing.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }else{
                                                    @zhengshuleixing.removeData('1,2,9,10,11,12,13,14,15,16');
                                               }
                                        ]]>
                                    </Init>
                                    <Triggers>
                                        <Trigger Type="javascript/angular" Runat="client">
                                            <![CDATA[
                                               var v = this.getValue();
                                               var j = getHeadValue("jingyingfangshi");
                                               @zhengshuleixing.loadDataSource();
                                               if(v==2){/* 2	终端*/
                                                    @zhengshuleixing.removeData('1,2,9,10,11,12,13,14,15,16');
                                               }else if(v==3&&j==1){ /*3	诊所 盈利*/
                                                     @zhengshuleixing.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }else if(v==3&&j==2){/*3	诊所 非盈利*/
                                                    @zhengshuleixing.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }else if(v==1&&j==1){/*1	医院 非盈利*/
                                                    @zhengshuleixing.removeData('1,2,7,8,9,10,11,12,13,14,15');
                                               }else if(v==1&&j==2){/*1	医院 非盈利*/
                                                   @zhengshuleixing.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }else{
                                                    @zhengshuleixing.removeData('1,2,9,10,11,12,13,14,15,16');
                                               }
											]]>
                                        </Trigger>
                                    </Triggers>
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="5">
                                <BillUIWidget Key="dizhi" Caption="注册地址"
                                              DataTableKey="kehujibenxinxi" Required="Required"
                                              DataTableColumn="dizhi" EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="4">
                                <BillUIWidget Key="onlineid" Caption="电商编号" Disable="true"
                                              DataTableKey="kehujibenxinxi"
                                              DataTableColumn="onlineid" EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                        </BillUIRowPanel>
                        <BillUIRowPanel>
                            <BillUIColPanel Width="12">
                                <BillUIWidget Key="jingyingfanwei" Caption="经营范围" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="jingyingfanwei"
                                              EnabledWhen="True" S="checkboxWrap"
                                              WidgetType="BillUICheckbox" Src="bill/selectSrc?type=shangpinleibie">
                                    <Init Type="javascript/angular" Runat="client">
                                        <![CDATA[
                                         this.loadDataSource();
                                    ]]>
                                    </Init>
                                    <Triggers>
                                        <Trigger Type="javascript/angular" Runat="client">
                                            <![CDATA[
												var names=this.getSelectionName();
												setHeadValue("fanweiName",names);
	                            		]]>
                                        </Trigger>
                                    </Triggers>
                                </BillUIWidget>
                            </BillUIColPanel>
                        </BillUIRowPanel>
                        <BillUIRowPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="sheng" Caption="省" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="sheng"
                                              EnabledWhen="True" K="areaName" V="areaCode"
                                              WidgetType="BillUISelect">
                                    <Init Type="javascript/angular" Runat="client">
                                        <![CDATA[
                                             this.loadDataSource('common/findAreaByParentId?parentId=0');
                                             var code=getHeadValue("sheng");
                                             if(code!=0){
                                                 @shi.loadDataSource('common/findAreaByParentId?parentId='+code);
                                             }
                                         ]]>
                                    </Init>
                                    <Triggers>
                                        <Trigger Type="javascript/angular" Runat="client">
                                            <![CDATA[
                                            var code=this.getValue();
                                            @shi.loadDataSource('common/findAreaByParentId?parentId='+code);
                                            @qu.clearDataSource();
                                            ]]>
                                        </Trigger>
                                    </Triggers>
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="shi" Caption="市" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="shi"
                                              EnabledWhen="True"  K="areaName" V="areaCode"
                                              WidgetType="BillUISelect">
                                    <Init Type="javascript/angular" Runat="client">
                                        <![CDATA[
                                             var code=getHeadValue("shi");
                                             if(code!=0){
                                                @qu.loadDataSource('common/findAreaByParentId?parentId='+code);
                                               }
                                         ]]>
                                    </Init>
                                    <Triggers>
                                        <Trigger Type="javascript/angular" Runat="client">
                                            <![CDATA[
                                            var code=this.getValue();
                                            @qu.loadDataSource('common/findAreaByParentId?parentId='+code);
                                            ]]>
                                        </Trigger>
                                    </Triggers>
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="qu" Caption="区" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="qu"
                                              EnabledWhen="True"  K="areaName" V="areaCode"
                                              WidgetType="BillUISelect">
                                </BillUIWidget>
                            </BillUIColPanel>
                        </BillUIRowPanel>
                        <BillUIRowPanel>
                          <!--  var j = getHeadValue("jingyingfangshi");
                            if(j==1){ /*3	诊所 盈利*/
                            @swfzjg.setEnable();

                            @yingyezhizhao.setEnable();
                            @fazhengjiguan.setEnable();
                            @zhuceriqi.setEnable();
                            @yxqzfs.setEnable();
                            @zcyxq.setEnable();

                            @sfszhy.setEnable();
                            }else {/*3	诊所 非盈利*/
                            @yingyezhizhao.setDisable();
                            @fazhengjiguan.setDisable();
                            @zhuceriqi.setDisable();
                            @yxqzfs.setDisable();
                            @zcyxq.setDisable();

                            @sfszhy.setDisable();
                            @zzjgdmz.setDisable();
                            @fazhengriqi.setDisable();
                            @fzyxq.setDisable();
                            @shuihao.setDisable();

                            @swfzjg.setDisable();
                            }-->
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="jingyingfangshi" Caption="经营方式" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="jingyingfangshi"
                                              EnabledWhen="True"
                                              WidgetType="BillUISelect"
                                              Src="bill/selectSrc?type=jinyingfangshi">
                                    <Init Type="javascript/angular" Runat="client">
                                        <![CDATA[
                                                   var j = getHeadValue("jingyingfangshi");
                                                   if(j==1){ /*盈利*/
                                                      @zzjgdmz.setEnable();
                                                      @fazhengriqi.setEnable();
                                                      @fzyxq.setEnable();
                                                      @shuihao.setEnable();
                                                      @swfzjg.setEnable();

                                                      @yingyezhizhao.setEnable();
                                                      @fazhengjiguan.setEnable();
                                                      @zhuceriqi.setEnable();
                                                      @yxqzfs.setEnable();
                                                      setHeadValue('yxqzfs',0);
                                                      @zcyxq.setEnable();

                                                      @sfszhy.setEnable();
                                                      setHeadValue('sfszhy',0);
                                               }else {/* 非盈利*/
                                                     @yingyezhizhao.setDisable();
                                                     setHeadValue('yingyezhizhao','');
                                                     @fazhengjiguan.setDisable();
                                                     setHeadValue('fazhengjiguan','');
                                                     @zhuceriqi.setDisable();
                                                     setHeadValue('zhuceriqi','');
                                                    @yxqzfs.setDisable();
                                                    setHeadValue('yxqzfs',1);
                                                    @zcyxq.setDisable();
                                                    setHeadValue('zcyxq','');

                                                    @sfszhy.setDisable();
                                                    setHeadValue('sfszhy',1);
                                                    @zzjgdmz.setDisable();
                                                    setHeadValue('zzjgdmz','');
                                                    @fazhengriqi.setDisable();
                                                    setHeadValue('fazhengriqi','');
                                                    @fzyxq.setDisable();
                                                    setHeadValue('fzyxq','');
                                                    @shuihao.setDisable();
                                                    setHeadValue('shuihao','');

                                                    @swfzjg.setDisable();
                                                    setHeadValue('swfzjg','');
                                               }
                                               this.loadDataSource();
                                        ]]>
                                    </Init>
                                    <Triggers>
                                        <Trigger Type="javascript/angular" Runat="client">
                                            <![CDATA[
                                                var v = getHeadValue("kehuleixing");
                                                var j = this.getValue();
                                                @zhengshuleixing.loadDataSource();
                                                @zhengshuleixing.clearDataSource();
                                                if(v==3&&j==1){ /*3	诊所 盈利*/
                                                      @zhengshuleixing.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }else if(v==3&&j==2){/*3	诊所 非盈利*/
                                                    @zhengshuleixing.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }else if(v==1&&j==1){/*1	医院 非盈利*/
                                                    @zhengshuleixing.removeData('1,2,7,8,9,10,11,12,13,14,15');
                                               }else if(v==1&&j==2){/*1	医院 非盈利*/
                                                   @zhengshuleixing.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }
                                               if(j==1){ /*盈利*/
                                                      @zzjgdmz.setEnable();
                                                      @fazhengriqi.setEnable();
                                                      @fzyxq.setEnable();
                                                      @shuihao.setEnable();
                                                      @swfzjg.setEnable();

                                                      @yingyezhizhao.setEnable();
                                                      @fazhengjiguan.setEnable();
                                                      @zhuceriqi.setEnable();
                                                      @yxqzfs.setEnable();
                                                      setHeadValue('yxqzfs',0);
                                                      @zcyxq.setEnable();

                                                      @sfszhy.setEnable();
                                                      setHeadValue('sfszhy',0);
                                               }else {/* 非盈利*/
                                                     @yingyezhizhao.setDisable();
                                                     setHeadValue('yingyezhizhao','');
                                                     @fazhengjiguan.setDisable();
                                                     setHeadValue('fazhengjiguan','');
                                                     @zhuceriqi.setDisable();
                                                     setHeadValue('zhuceriqi','');
                                                    @yxqzfs.setDisable();
                                                    setHeadValue('yxqzfs',1);
                                                    @zcyxq.setDisable();
                                                    setHeadValue('zcyxq','');

                                                    @sfszhy.setDisable();
                                                    setHeadValue('sfszhy',1);
                                                    @zzjgdmz.setDisable();
                                                    setHeadValue('zzjgdmz','');
                                                    @fazhengriqi.setDisable();
                                                    setHeadValue('fazhengriqi','');
                                                    @fzyxq.setDisable();
                                                    setHeadValue('fzyxq','');
                                                    @shuihao.setDisable();
                                                    setHeadValue('shuihao','');

                                                    @swfzjg.setDisable();
                                                    setHeadValue('swfzjg','');
                                               }
											]]>
                                        </Trigger>
                                    </Triggers>
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="yingyezhizhao" Caption="营业执照" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="yingyezhizhao"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="fazhengjiguan" Caption="发证机关（营业执照）" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="fazhengjiguan"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="zhuceriqi" Caption="注册日期" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="zhuceriqi"
                                              EnabledWhen="True"
                                              WidgetType="BillUIDateTime" DateFormat="yyyy-mm-dd">
                                </BillUIWidget>
                            </BillUIColPanel>
                        </BillUIRowPanel>
                        <BillUIRowPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="yxqzfs" Caption="有效期至方式" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="yxqzfs"
                                              EnabledWhen="True"
                                              WidgetType="BillUISelect" Src="bill/selectSrc?type=yxqzfs">
                                    <Init Type="javascript/angular" Runat="client">
                                        <![CDATA[
												this.loadDataSource();
										]]>
                                    </Init>
                                    <Triggers>
                                        <Trigger Type="javascript/angular" Runat="client">
                                            <![CDATA[
                                                    var v=this.getValue();
                                                    if(v==1){
                                                        setHeadValue('zcyxq','');
                                                        @zcyxq.setDisable();
                                                    }else{
                                                        @zcyxq.setEnable();
                                                    }
                                                ]]>
                                        </Trigger>
                                    </Triggers>
                                </BillUIWidget>
                            </BillUIColPanel>

                            <BillUIColPanel Width="4">
                                <BillUIWidget Key="zcyxq" Caption="有效期至（营业执照）" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="zcyxq"
                                              EnabledWhen="True"
                                              WidgetType="BillUIDateTime" DateFormat="yyyy-mm-dd">
                                    <Init Type="javascript/angular" Runat="client">
                                        <![CDATA[
                                                  var v=getHeadValue("yxqzfs");
                                                  if(v==1){
                                                        setHeadValue('zcyxq','');
                                                        console.log(v);
                                                        @zcyxq.setDisable();
                                                    }else{
                                                        @zcyxq.setEnable();
                                                     }
										]]>
                                    </Init>
                                </BillUIWidget>
                            </BillUIColPanel>
                        </BillUIRowPanel>
                        <BillUIRowPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="sfszhy" Caption="是否三证合一"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="sfszhy"
                                              EnabledWhen="True"
                                              WidgetType="BillUISelect" Src="bill/selectSrc?type=bool">
                                    <Init Type="javascript/angular" Runat="client">
                                        <![CDATA[
                                                 var v=getHeadValue("sfszhy");
                                                  if(v==1){
                                                        @zzjgdmz.setDisable();
                                                        @fazhengriqi.setDisable();
                                                        @fzyxq.setDisable();
                                                        @shuihao.setDisable();
                                                        @swfzjg.setDisable();
                                                    }else{
                                                        @zzjgdmz.setEnable();
                                                        @fazhengriqi.setEnable();
                                                        @fzyxq.setEnable();
                                                        @shuihao.setEnable();
                                                        @swfzjg.setEnable();
                                                    }
												this.loadDataSource();
										]]>
                                    </Init>
                                    <Triggers>
                                        <Trigger Type="javascript/angular" Runat="client">
                                            <![CDATA[
                                                    var v=this.getValue();
                                                    if(v==1){
                                                        @zzjgdmz.setDisable();
                                                        setHeadValue('zzjgdmz','');
                                                        @fazhengriqi.setDisable();
                                                        setHeadValue('fazhengriqi','');
                                                        @fzyxq.setDisable();
                                                        setHeadValue('fzyxq','');
                                                        @shuihao.setDisable();
                                                         setHeadValue('shuihao','');
                                                        @swfzjg.setDisable();
                                                         setHeadValue('swfzjg','');
                                                    }else{
                                                        @zzjgdmz.setEnable();
                                                        @fazhengriqi.setEnable();
                                                        @fzyxq.setEnable();
                                                        @shuihao.setEnable();
                                                        @swfzjg.setEnable();
                                                    }
                                                ]]>
                                        </Trigger>
                                    </Triggers>
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="kaihuyinhang" Caption="开户银行" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="kaihuyinhang"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="yinhangzhanghao" Caption="银行账号" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="yinhangzhanghao"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="kaihuhuming" Caption="开户户名" Required="Required"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="kaihuhuming"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                        </BillUIRowPanel>
                        <BillUIRowPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="zzjgdmz" Caption="组织机构代码证"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="zzjgdmz"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="fazhengriqi" Caption="发证日期"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="fazhengriqi"
                                              EnabledWhen="True"
                                              WidgetType="BillUIDateTime" DateFormat="yyyy-mm-dd">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="4">
                                <BillUIWidget Key="fzyxq" Caption="有效期至（组织机构代码证）"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="fzyxq"
                                              EnabledWhen="True"
                                              WidgetType="BillUIDateTime" DateFormat="yyyy-mm-dd">
                                </BillUIWidget>
                            </BillUIColPanel>

                        </BillUIRowPanel>
                        <BillUIRowPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="shuihao" Caption="税务登记号"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="shuihao"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="4">
                                <BillUIWidget Key="swfzjg" Caption="发证机关（组织机构代码证）"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="swfzjg"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="3" ColOffset="3">
                                <BillUIWidget Key="yewuyuan" Caption="业务员"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="yewuyuan"
                                              EnabledWhen="True" WidgetType="BillUIPopupWindow"
                                              ViewSize="lg" Disable="true" Src="renyuan">
                                    <Init Type="javascript/angular" Runat="client">
                                        <![CDATA[
                                        	var orgId=this.getOrgId();
                                            this.setEnvModel({deptName:'销售部'},{orgId:orgId});
                                        ]]>
                                    </Init>
                                    <Triggers>
                                        <Trigger>
                                            <![CDATA[
                                                var yewuyuan=this.rows[0];
	                                            this.setValue(yewuyuan.realName);
                                        ]]>
                                        </Trigger>
                                    </Triggers>
                                </BillUIWidget>
                            </BillUIColPanel>
                        </BillUIRowPanel>
                        <BillUIRowPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="qyfzr" Caption="企业负责人"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="qyfzr"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="3">
                                <BillUIWidget Key="zlfzr" Caption="质量负责人"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="zlfzr"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                            <BillUIColPanel Width="6">
                                <BillUIWidget Key="cangkudizhi" Caption="仓库地址"
                                              DataTableKey="kehujibenxinxi" DataTableColumn="cangkudizhi"
                                              EnabledWhen="True"
                                              WidgetType="BillUIString">
                                </BillUIWidget>
                            </BillUIColPanel>
                        </BillUIRowPanel>
                    </BillUIGridPanel>
                </BillUIPanel>
                <BillUIPanel Layout="tab" Key="mainContainer_tab" Caption="客户基本信息关系分录"
                             S="panel  panel-primary  publicPanel">
                    <BillUIPanel Layout="flex" Key="one" Caption="证照信息">
                        <BillUIGrid Key="zhiliangzhengzhaoxinxi" OptMode="Edit"
                                    DataTableKey="zhiliangzhengzhaoxinxi">
                            <Rules>
                                <Rule Type="Interface">
                                    <ErrorMsg>
                                        <![CDATA[
                                            证书类型明细项不能为空,请认真填写！！！
                                        ]]>
                                    </ErrorMsg>

                                    <RuleExpr>
                                        <![CDATA[
                                             com.xyy.erp.platform.common.func.ConditionLicenceSale
                                         ]]>
                                    </RuleExpr>
                                </Rule>
                            </Rules>
                            <GridHeads>
                                <GridHead Col="zhengshuleixing" Caption="证书类型" enableEdit="True" Width="180px">
                                    <BillUIWidget Key="zhengshuleixing" WidgetType="BillUISelect"
                                                  Src="bill/selectSrc?type=zhengjianmingcheng">
                                        <Init Type="javascript/angular" Runat="client">
                                            <![CDATA[
                                              this.loadDataSource();
                                               var v = getHeadValue("kehuleixing");
                                               var j = getHeadValue("jingyingfangshi");
                                               if(v==2){/* 2	终端*/
                                                    this.removeData('1,2,9,10,11,12,13,14,15,16');
                                               }else if(v==3&&j==1){ /*3	诊所 盈利*/
                                                     this.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }else if(v==3&&j==2){/*3	诊所 非盈利*/
                                                    this.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }else if(v==1&&j==1){/*1	医院 非盈利*/
                                                    this.removeData('1,2,7,8,9,10,11,12,13,14,15');
                                               }else if(v==1&&j==2){/*1	医院 非盈利*/
                                                   this.removeData('1,2,3,4,5,6,7,8,9,10,11,12,13,14,15');
                                               }else{
                                                    this.removeData('1,2,9,10,11,12,13,14,15,16');
                                               }
                                            ]]>
                                        </Init>
                                        <Formatters>
                                            <Formatter>
                                                <![CDATA[
                                                  [{'type':'zhengjianmingcheng'}]
                                               ]]>
                                            </Formatter>
                                        </Formatters>
                                    </BillUIWidget>
                                </GridHead>
                                <GridHead Col="zhengshubianhao" Caption="证书编号" enableEdit="True">
                                    <BillUIWidget Key="zhengshubianhao" WidgetType="BillUIString">
                                    </BillUIWidget>
                                </GridHead>
                                <GridHead Col="fazhengjiguan" Caption="发证机关" enableEdit="True">
                                    <BillUIWidget Key="fazhengjiguan" WidgetType="BillUIString">
                                    </BillUIWidget>
                                </GridHead>
                                <GridHead Col="fazhengriqi" Caption="发证日期" enableEdit="True">
                                    <BillUIWidget Key="fazhengriqi" WidgetType="BillUIDateTime"/>
                                </GridHead>
                                <GridHead Col="youxiaoqizhi" Caption="有效期至" enableEdit="True">
                                    <BillUIWidget Key="youxiaoqizhi" WidgetType="BillUIDateTime"/>
                                </GridHead>
                            </GridHeads>
                        </BillUIGrid>
                    </BillUIPanel>
                    <BillUIPanel Layout="flex" Key="mainContainer_details2" Caption="客户委托人">
                        <BillUIGrid Key="kehuweituoren" OptMode="Edit"
                                    DataTableKey="kehuweituoren">
                            <GridHeads>
                                <GridHead Col="wtrlx" Caption="委托人类型" enableEdit="True" Width="80px">
                                    <BillUIWidget Key="wtrlx" WidgetType="BillUISelect" Src="bill/selectSrc?type=wtrlx">
                                        <Init Type="javascript/angular" Runat="client">
                                            <![CDATA[
                                                         this.loadDataSource();
                                                        ]]>
                                        </Init>
                                        <Formatters>
                                            <Formatter>
                                                <![CDATA[
					                                          [{'type':'wtrlx'}]
					                                       ]]>
                                            </Formatter>
                                        </Formatters>
                                    </BillUIWidget>
                                </GridHead>
                                <GridHead Col="xingming" Caption="姓名" enableEdit="True" Width="80px">
                                    <BillUIWidget Key="xingming" WidgetType="BillUIString">
                                        <Triggers>
                                            <Trigger Type="javascript/angular" Runat="client">
                                                <![CDATA[
                                                var co=getDataset("kehuweituoren").co;
                                                var v=co.sfzlxr;
                                                if(v==1){
                                                    setHeadValue('lianxiren',co.xingming);
                                                }
                                                ]]>
                                            </Trigger>
                                        </Triggers>
                                    </BillUIWidget>
                                </GridHead>
                                <GridHead Col="xingbie" Caption="性别" enableEdit="True" Width="60px">
                                    <BillUIWidget Key="xingbie" WidgetType="BillUISelect"
                                                  Src="bill/selectSrc?type=xingbie">
                                        <Init Type="javascript/angular" Runat="client">
                                            <![CDATA[
                                                         this.loadDataSource();
                                                        ]]>
                                        </Init>
                                        <Formatters>
                                            <Formatter>
                                                <![CDATA[
					                                          [{'type':'xingbie'}]
					                                       ]]>
                                            </Formatter>
                                        </Formatters>
                                    </BillUIWidget>
                                </GridHead>
                                <GridHead Col="dianhua" Caption="电话" enableEdit="True" Width="100px">
                                    <BillUIWidget Key="dianhua" WidgetType="BillUIString">
                                        <Triggers>
                                            <Trigger Type="javascript/angular" Runat="client">
                                                <![CDATA[
                                                var co=getDataset("kehuweituoren").co;
                                                var v=co.sfzlxr;
                                                if(v==1){
                                                    setHeadValue('dianhua',co.dianhua);
                                                }
                                                ]]>
                                            </Trigger>
                                        </Triggers>
                                        <CheckRules>
                                            <CheckRule>
                                                <![CDATA[
                                                     {"type":"builtin","rule":telAndMobile,"msg":"请输入正确手机或者固定电话"}
                                                ]]>
                                            </CheckRule>
                                        </CheckRules>
                                    </BillUIWidget>
                                </GridHead>
                                <GridHead Col="zhengjianhaoma" Caption="证件号码" enableEdit="True" Width="80px">
                                    <BillUIWidget Key="zhengjianhaoma" WidgetType="BillUIString">
                                        <Triggers>
                                            <Trigger Type="javascript/angular" Runat="client">
                                                <![CDATA[
                                                var co=getDataset("kehuweituoren").co;
                                                var v=co.sfzlxr;
                                                if(v==1){
                                                    setHeadValue('zhengjianhaoma',co.zhengjianhaoma);
                                                }
                                                ]]>
                                            </Trigger>
                                        </Triggers>
                                    </BillUIWidget>
                                </GridHead>
                                <GridHead Col="dizhi" Caption="地址" enableEdit="True" Width="80px">
                                    <BillUIWidget Key="dizhi" WidgetType="BillUIString"/>
                                </GridHead>
                                <GridHead Col="wtryxq" Caption="委托人有效期" enableEdit="True" Width="60px">
                                    <BillUIWidget Key="wtryxq" WidgetType="BillUIDateTime"/>
                                </GridHead>
                                <GridHead Col="wtsbh" Caption="委托书编号" enableEdit="True" Width="80px">
                                    <BillUIWidget Key="wtsbh" WidgetType="BillUIString"/>
                                </GridHead>

                                <GridHead Col="sfzlxr" Caption="是否主联系人"
                                          enableEdit="True" Width="80px">
                                    <BillUIWidget Key="sfzlxr"
                                                  WidgetType="BillUISelect" Src="bill/selectSrc?type=bool">
                                        <Init Type="javascript/angular" Runat="client">
                                            <![CDATA[
                                                         this.loadDataSource();
                                                        ]]>
                                        </Init>
                                        <Triggers>
                                            <Trigger Type="javascript/angular" Runat="client">
                                                <![CDATA[
                                                var co=getDataset("kehuweituoren").co;
                                                var rows=getRows("kehuweituoren");
                                                var v=this.getValue();
                                                if(v==1){
                                                    for(var i=0;i<rows.length;i++){
                                                      if(rows[i].SN!=co.SN){
                                                          setColValue("kehuweituoren", "sfzlxr", i, 0);
                                                      }
                                                    };
                                                    setHeadValue('lianxiren',co.xingming);
                                                    setHeadValue('dianhua',co.dianhua);
                                                    setHeadValue('zhengjianhaoma',co.zhengjianhaoma);
                                                }else if(v==0){
                                                    for(var i=0;i<rows.length;i++){
                                                      if(rows[i].SN!==co.SN){
                                                        setColValue("kehuweituoren", "sfzlxr", i,1);
                                                      }
                                                    };
                                                }
                                                ]]>
                                            </Trigger>
                                        </Triggers>
                                        <Formatters>
                                            <Formatter>
                                                <![CDATA[
					                                          [{'type':'bool'}]
					                                       ]]>
                                            </Formatter>
                                        </Formatters>
                                    </BillUIWidget>
                                </GridHead>

                            </GridHeads>
                        </BillUIGrid>
                    </BillUIPanel>
                </BillUIPanel>
            </BillUIPanel>
        </BillBodyMeta>
    </BillBody>
    <BillHeadMeta>
        <BillStatusCollection>
            <Status Code="25">审核中</Status>
            <Status Code="30">修改中</Status>
            <Status Code="31">修改驳回</Status>
            <Status Code="40" Default="true">正式</Status>
        </BillStatusCollection>
        <ProcessCollection>
            <Process Name="客户修改">
                <![CDATA[
                        status==30
                ]]>
            </Process>
        </ProcessCollection>
        <BillEventCollection>
            <Event Type="StatusChanged" Processor="com.xyy.bill.handler.biz.DicClientStausHandler"/>
        </BillEventCollection>
    </BillHeadMeta>
</BillFormMeta>

